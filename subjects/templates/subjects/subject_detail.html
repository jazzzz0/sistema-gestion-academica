{% extends "base.html" %}

{% block title %}{{ subject.name }}{% endblock %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3">{{ subject.name }}</h1>

    <div>
        <a href="{% url 'subjects:subject_update' subject.pk %}" class="btn btn-warning me-2">
            Editar
        </a>
        <a href="{% url 'subjects:subject_delete' subject.pk %}" class="btn btn-danger">
            Eliminar
        </a>
    </div>
</div>

<!-- Profesor Titular -->
{% if subject.teacher %}
    <span class="badge bg-primary">
        Profesor Titular: {{ subject.teacher.surname }}, {{ subject.teacher.name }}
    </span>
{% else %}
    <span class="badge bg-secondary">Sin profesor asignado</span>
{% endif %}

<hr class="my-4">

<!-- Información General -->
<h2 class="h5 mb-3">Información General</h2>

<div class="mb-4">
    <h6 class="fw-bold">Descripción</h6>
    <p>
        {% if subject.description %}
            {{ subject.description }}
        {% else %}
            <span class="text-muted">Sin descripción</span>
        {% endif %}
    </p>

    <!-- Cupo -->
    <h6 class="fw-bold">Cupo</h6>
    <p>
        {{ enrollment_count }} / {{ subject.quota }} ocupados
    </p>
</div>

<hr class="my-4">

<!-- Carreras (Planes de Estudio) -->
<h2 class="h5 mb-3">Planes de Estudio</h2>

{% if subject.careers.all %}
    {% if subject.careers.all.count %}
        <ul class="list-group mb-4">
            {% for career in subject.careers.all %}
                <li class="list-group-item">
                    {{ career.name }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted fst-italic">
            Esta materia no pertenece a ninguna carrera.
        </p>
    {% endif %}
{% else %}
    <p class="text-muted fst-italic">
        Esta materia no pertenece a ninguna carrera.
    </p>
{% endif %}

<!-- Futuro botón (placeholder) -->
<div class="mt-4">
    <button class="btn btn-outline-secondary" disabled>
        Ver Alumnos Inscritos (Próximamente)
    </button>
</div>

{% endblock %}
