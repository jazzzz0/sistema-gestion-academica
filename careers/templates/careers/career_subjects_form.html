{% extends "base.html" %}
{% load static %}

{% block title %}Gestionar Materias - {{ career.name }}{% endblock %}


{% block head %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="card shadow-sm border-0">
      <div class="card-header bg-white py-3">
          <h4 class="mb-0 text-primary fw-bold">
              <i class="bi bi-book-half me-2"></i>Gestionar Plan: {{ career.name }}
          </h4>
      </div>

      <div class="card-body p-4">
          <form method="post" novalidate>
            {% csrf_token %}

            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}

            <div class="mb-4">
                <label for="{{ form.subjects.id_for_label }}" class="form-label fw-bold">Materias del Plan de Estudios</label>

                {{ form.subjects }}

                {% if form.subjects.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.subjects.errors }}
                    </div>
                {% endif %}
            </div>

            <div class="d-flex justify-content-end gap-2 pt-3 border-top">
                <a href="{% url 'careers:career_detail' career.pk %}" class="btn btn-secondary">
                    Cancelar
                </a>
                <button type="submit" class="btn btn-primary px-4">
                    <i class="bi bi-save me-1"></i> Guardar Cambios
                </button>
            </div>
          </form>
      </div>
  </div>
</div>
{% endblock %}


{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/es.js"></script>

<script>
    $(document).ready(function() {
        $('.select2-subjects').select2({
            theme: "bootstrap-5",
            language: "es",
            placeholder: "Buscar y seleccionar materias...",
            allowClear: true,
            closeOnSelect: false,
            width: '100%'
        });
    });
</script>
{% endblock %}